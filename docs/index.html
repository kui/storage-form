<!doctype html>
<meta charset="utf-8" />

<title>storage-form Examples</title>

<style>
  code {
    background-color: #eee;
    padding: 3px;
  }
  pre {
    display: inline-block;
    background-color: #eee;
    padding: 1em;
    & > code {
      background-color: transparent;
      padding: 0;
    }
  }
  h2 {
    border-bottom: 1px solid #999;
  }
</style>

<script type="module" src="./js/storage-elements-registerer.js" async></script>

<script>
  // Implement <script type="code"> element which shows the code as a code block.
  // TODO trim indent
  addEventListener("DOMContentLoaded", () => {
    for (const e of document.querySelectorAll("script[type=code]")) {
      const pre = document.createElement("pre");
      const content = e.textContent
        .replace(/^\n*/, "")
        .replace(/(\n\s*)*$/, "")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
      pre.innerHTML = `<code>${trimIndent(content)}</code>`;
      e.parentNode.insertBefore(pre, e);
    }
  });

  function trimIndent(text) {
    const lines = text.split("\n");
    const indent = lines
      .filter((line) => line.trim() !== "")
      .map((line) => line.match(/^\s*/)[0].length)
      .reduce((a, b) => Math.min(a, b));
    return lines.map((line) => line.slice(indent)).join("\n");
  }
</script>

<h1>
  <a href="https://github.com/kui/storage-elements"
    ><code>storage-form</code></a
  >
  Examples
</h1>

<p>
  <code>storage-form</code> is a custom element that can edit and store the
  values in some storages.
</p>

<p>
  See
  <a href="https://github.com/kui/storage-elements/blob/master/docs/index.html"
    >HTML souce</a
  >.
</p>

<h2>Supported storages</h2>

<p>
  the storage is selected by <code>area</code> attribute. The
  <code>area</code> attribute can be one of the following values:
</p>

<dl>
  <dt><code>local-storage</code></dt>
  <dd>Use <code>localStorage</code> as a storage.</dd>
  <dt><code>session-storage</code></dt>
  <dd>Use <code>sessionStorage</code> as a storage.</dd>
  <dt><code>chrome-local</code></dt>
  <dd>Use <code>chrome.storage.local</code> as a storage.</dd>
  <dt><code>chrome-sync</code></dt>
  <dd>Use <code>chrome.storage.sync</code> as a storage.</dd>
</dl>

<h3>Example</h3>

<p>
  You can edit and store the <code>foo</code> value in the
  <code>localStorage</code>.
</p>

<p>Code:</p>

<script type="code">
  <storage-form area="local-storage">
    <label>foo: <input name="foo" /></label>
  </storage-form>
</script>

<p>Result:</p>

<storage-form area="local-storage">
  <label>foo: <input name="foo" /></label>
</storage-form>

<h2>Supported form elements</h2>

<p>
  Some form elements are supported. You can use <code>input</code>,
  <code>select</code>, <code>textarea</code> and <code>output</code> elements.
</p>

<storage-form area="local-storage">
  <h3>type="text"</h3>
  <p>
    <label>foo input: <input name="foo" /></label>
  </p>
  <p>
    <label>foo output: <output name="foo"></output></label>
  </p>

  <h3>type="checkbox"</h3>

  <p>
    if checked, the value of <code>checkbox-sample1</code> is <code>on</code>,
    otherwise an empty string.
  </p>

  <script type="code">
    <label>
      checkbox-sample1:
      <input type="checkbox" name="checkbox-sample1" />
    </label>
  </script>

  <p>
    <label>
      checkbox-sample1:
      <input type="checkbox" name="checkbox-sample1" />
    </label>
  </p>

  <p>
    <label>
      checkbox-sample2:
      <input
        type="checkbox"
        name="checkbox-sample2"
        value="nyan"
        data-unchecked-value="wan"
        checked
      />
    </label>
    : checked-value="nyan", unchecked-value="wan", and default checked
  </p>
  <p>
    radio-sample:
    <label
      ><input type="radio" name="radio-sample" value="value-1" />value-1</label
    >,
    <label
      ><input type="radio" name="radio-sample" value="value-2" />value-2</label
    >,
    <label
      ><input
        type="radio"
        name="radio-sample"
        value="value-3"
        checked
      />value-3</label
    >
  </p>
  <p>
    <textarea name="sometextarea">this is a default textarea value.</textarea>
  </p>
  <p>
    <label>
      select-sample:
      <select name="select-sample">
        <option>value-1</option>
        <option selected>value-2</option>
        <option>value-3</option>
      </select>
    </label>
  </p>
</storage-form>

<h2><code>&lt;area-select&gt;</code> example</h2>

<p>
  You can change the stored area for the <code>ex4</code>'s value using an
  <code>area-select</code> element.
</p>

<storage-form id="example5">
  <label>
    Storage Area:
    <select is="area-select" name="example5-area" area="local-storage"></select>
  </label>
  <br />
  <label>example5: <input name="example5" /></label>
</storage-form>
